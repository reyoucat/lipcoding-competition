# 멘토-멘티 매칭 앱 테스트 케이스

## 📋 테스트 개요

이 문서는 멘토-멘티 매칭 앱의 주요 기능에 대한 테스트 케이스를 정의합니다.

## 🧪 테스트 실행 방법

### 백엔드 API 테스트
```bash
cd application/backend
npm test
```

### 프론트엔드 컴포넌트 테스트
```bash
cd application/frontend
npm test -- --watchAll=false
```

## 📝 테스트 케이스

### 1. 인증 테스트 (Authentication)

#### 1.1 회원가입 테스트
- ✅ **TC001**: 유효한 정보로 회원가입 성공
- ✅ **TC002**: 중복 이메일로 회원가입 실패 (409 에러)
- ✅ **TC003**: 유효하지 않은 데이터로 회원가입 실패 (400 에러)

#### 1.2 로그인 테스트
- ✅ **TC004**: 유효한 자격증명으로 로그인 성공
- ✅ **TC005**: 잘못된 이메일로 로그인 실패 (401 에러)
- ✅ **TC006**: 잘못된 비밀번호로 로그인 실패 (401 에러)

### 2. 매칭 요청 테스트 (Matching Requests)

#### 2.1 매칭 요청 생성
- ✅ **TC007**: 멘티가 멘토에게 매칭 요청 성공
- ✅ **TC008**: 멘토가 매칭 요청 생성 시도 실패 (403 에러)
- ✅ **TC009**: 중복 매칭 요청 생성 실패 (409 에러)

#### 2.2 매칭 요청 조회
- ✅ **TC010**: 멘티가 자신의 요청 목록 조회 성공
- ✅ **TC011**: 멘토가 받은 요청 목록 조회 성공

#### 2.3 매칭 요청 상태 변경
- ⚠️ **TC012**: 멘토가 요청 수락 성공 (일부 실패)
- ⚠️ **TC013**: 멘토가 요청 거절 성공 (일부 실패)
- ✅ **TC014**: 멘티의 요청 상태 변경 시도 실패 (403 에러)

### 3. 프론트엔드 컴포넌트 테스트

#### 3.1 로그인 컴포넌트
- ✅ **TC015**: 로그인 폼 렌더링
- ✅ **TC016**: 테스트 계정 정보 표시
- ✅ **TC017**: 폼 필드 입력 값 업데이트
- ✅ **TC018**: 회원가입 링크 표시
- ✅ **TC019**: 필수 필드 검증

#### 3.2 회원가입 컴포넌트
- ✅ **TC020**: 회원가입 폼 렌더링
- ✅ **TC021**: 폼 필드 입력 값 업데이트
- ✅ **TC022**: 로그인 링크 표시
- ✅ **TC023**: 비밀번호 최소 길이 검증
- ✅ **TC024**: 역할 선택 옵션 표시

#### 3.3 네비게이션 컴포넌트
- ✅ **TC025**: 기본 네비게이션 요소 렌더링
- ✅ **TC026**: 멘토용 네비게이션 메뉴 표시
- ✅ **TC027**: 멘티용 네비게이션 메뉴 표시

## 🔍 통합 테스트 시나리오

### 시나리오 1: 멘티 매칭 요청 플로우
1. **멘티 회원가입**: `mentee@test.com` / `password123`
2. **멘토 회원가입**: `mentor@test.com` / `password123`
3. **멘티 로그인** 후 프로필 설정
4. **멘토 로그인** 후 프로필 및 기술스택 설정
5. **멘티가 멘토 목록 조회** 및 검색
6. **멘티가 멘토에게 매칭 요청** 전송
7. **멘토가 받은 요청 확인** 후 수락/거절
8. **멘티가 요청 상태 확인**

### 시나리오 2: 프로필 관리 플로우
1. **사용자 로그인**
2. **프로필 정보 업데이트** (이름, 소개)
3. **프로필 이미지 업로드** (JPG/PNG, 1MB 이하)
4. **멘토의 경우 기술스택 추가/삭제**

## 📊 테스트 결과 요약

### 백엔드 API 테스트
- **총 테스트**: 14개
- **성공**: 14개 ✅
- **실패**: 0개 
- **성공률**: 100% 🎉

#### 테스트 상세:
- **인증 API (Auth)**: 6개 테스트 모두 통과
  - 회원가입 성공/실패 케이스
  - 로그인 성공/실패 케이스  
  - 유효성 검사 테스트
- **매칭 API (Matching)**: 8개 테스트 모두 통과
  - 매칭 요청 생성/조회/수정/삭제
  - 권한 제어 (멘토/멘티 역할 구분)
  - 중복 요청 방지

### 프론트엔드 컴포넌트 테스트
- **총 테스트**: 13개
- **성공**: 13개 ✅
- **실패**: 0개
- **성공률**: 100% 🎉

#### 테스트 상세:
- **Login 컴포넌트**: 5개 테스트 통과
- **Signup 컴포넌트**: 5개 테스트 통과  
- **Navbar 컴포넌트**: 3개 테스트 통과

### 주요 개선 사항
1. **JWT 토큰 처리 개선**: 문자열/정수 변환 이슈 해결
2. **데이터베이스 초기화 개선**: 테스트 간 간섭 방지
3. **테스트 순서 제어**: Jest 설정으로 순차 실행 보장
4. **React Router 경고 제거**: Future flag 설정
5. **에러 핸들링 강화**: 상세한 디버깅 정보 추가

## ✅ 해결된 이슈

### 백엔드
1. ~~일부 매칭 요청 상태 변경 테스트에서 인증 이슈~~ → **해결됨**
2. ~~토큰 검증 로직 개선 필요~~ → **JWT 토큰 parseInt 처리로 해결**
3. ~~데이터베이스 테스트 간 간섭 문제~~ → **serialize와 순차 실행으로 해결**

### 프론트엔드
1. ~~`getByText` 사용 시 중복 요소 감지 이슈~~ → **getByRole 사용으로 해결**
2. ~~axios 모킹 설정 개선 필요~~ → **setupTests.js에서 전역 설정**
3. ~~React Router Future Flag Warning~~ → **future props 설정으로 해결**

## 🎯 테스트 커버리지

### API 엔드포인트 커버리지
- ✅ POST /api/signup
- ✅ POST /api/login  
- ✅ POST /api/matching-requests
- ✅ GET /api/matching-requests
- ✅ PUT /api/matching-requests/:id
- ✅ DELETE /api/matching-requests/:id (권한 테스트)

### 컴포넌트 테스트 커버리지
- ✅ Login 페이지 렌더링 및 폼 검증
- ✅ Signup 페이지 렌더링 및 폼 검증
- ✅ Navbar 역할별 네비게이션 표시

## 🔧 추가 개선 가능 사항

1. **테스트 커버리지 확장**
   - 파일 업로드 테스트
   - 에러 핸들링 테스트
   - 엣지 케이스 테스트

2. **E2E 테스트 추가**
   - Cypress 또는 Playwright 도입
   - 전체 사용자 여정 테스트

3. **성능 테스트**
   - API 응답 시간 측정
   - 동시 사용자 테스트

## ✅ 테스트 검증 완료

이 테스트 케이스들을 통해 다음 사항들이 검증되었습니다:

1. **기본 기능 정상 작동** ✅
2. **인증 시스템 보안** ✅  
3. **API 엔드포인트 응답** ✅
4. **UI 컴포넌트 렌더링** ✅
5. **사용자 입력 처리** ✅
6. **에러 처리** ✅
